<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#333333 name=theme-color> <base href=/ > <link href=global.css rel=stylesheet> <link href=global.bundle.css rel=stylesheet> <link href=manifest.json rel=manifest crossorigin=use-credentials> <link href=favicon.png rel=icon type=image/png> <link href=https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css rel=stylesheet crossorigin=anonymous integrity=sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl> <script crossorigin=anonymous integrity=sha384-nsg8ua9HAw1y0W1btsyWgBklPnCUAFLuTMS2G72MMONqmOymq585AcH49TLBQObG src=https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.min.js></script> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,{htmlContent:"\u003Ch1 id=\"documentation\"\u003EDocumentation\u003C\u002Fh1\u003E\n\u003C!-- Generate table of content by running `yarn readme:generate-doc-table` --\u003E\n\u003C!-- END doctoc generated TOC please keep comment here to allow auto update --\u003E\n\u003Ch2 id=\"file-structure\"\u003EFile structure\u003C\u002Fh2\u003E\n\u003Cp\u003ERestapify allow you to easily create REST API routes using a specific file structure. Take the following folder \u003Ccode\u003Eapi\u002F\u003C\u002Fcode\u003E for example:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode\u003E📂 api\n┣ 📂 users\n┃ ┗ 📜 *.json\n┃ ┗ 📜 [userid].json\n┃ ┗ 📜 [userid].DELETE.json\n┣ 📂 posts\n┃ ┗ 📜 [postid].json\n┃ ┗ 📜 my-post.PUT.json\n┣ 📜 posts.json\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EIt will serve the following routes:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode\u003EGET    \u002Fusers\nGET    \u002Fusers\u002F:userid\nDELETE \u002Fusers\u002F:userid\nGET    \u002Fposts\nGET    \u002Fposts\u002F:postid\nPUT    \u002Fposts\u002Fmy-post\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch2 id=\"routes-filename\"\u003ERoute's filename\u003C\u002Fh2\u003E\n\u003Cp\u003EThe mocked API creation start directly with the filename choice.\u003C\u002Fp\u003E\n\u003Ch3 class=\"mt-5\"  id=\"simple-route\"\u003ESimple route\u003C\u002Fh3\u003E\n\u003Cp\u003EYou can create a simple route with the filename of a \u003Ccode\u003Ejson\u003C\u002Fcode\u003E file:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode\u003E📂 api\n┣ 📂 animals\n┃ ┗ 📜 rabbits.json\n┣ 📜 posts.json\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EIt will serve the routes:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode\u003EGET \u002Fanimals\u002Frabbits\nGET \u002Fposts\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 class=\"mt-5\"  id=\"star-notation\"\u003EStar notation\u003C\u002Fh3\u003E\n\u003Cp\u003ETo easily manage your different routes \u003Ccode\u003Ejson\u003C\u002Fcode\u003E files into folder, you can use the star notation:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode\u003E📂 api\n┣ 📂 animals\n┃ ┗ 📜 *.json\n┃ ┗ 📜 rabbits.json\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EIt will serve the routes:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode class=\"bash language-bash\"\u003EGET \u002Fanimals    # &lt;-- served from the file \u002Fanimals\u002F*.json\nGET \u002Fanimals\u002Frabbits\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 class=\"mt-5\"  id=\"routes-variables\"\u003ERoute's variables\u003C\u002Fh3\u003E\n\u003Cp\u003EYou can define some variables in your routes by using squared brackets. It works on a filename but also on directory name:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode\u003E📂 api\n┣ 📂 posts\n┃ ┗ 📜 [postid].json\n┃ ┣ 📂 [postid]\n┃ ┃ ┗ 📜 comments.json\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThis will serve:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode\u003EGET \u002Fposts\u002F:postid\nGET \u002Fposts\u002F:postid\u002Fcomments\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EYou will be then able to use theses variables in the json files (see the \u003Ca href=\"docs#consume-routes-variables\"\u003EConsume route's variables\u003C\u002Fa\u003E section).\u003C\u002Fp\u003E\n\u003Cblockquote class=\"alert alert-warning\" \u003E\n  \u003Cp\u003E⚠️ In case your want to use severals variables inside a route like \u003Ccode\u003E\u002Fposts\u002F:var1\u002Fcomments\u002F:var2\u003C\u002Fcode\u003E, make sure that they have an unique name\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Ch3 class=\"mt-5\"  id=\"https-methods\"\u003EHTTP's methods\u003C\u002Fh3\u003E\n\u003Cp\u003EDefine your routes method (\u003Ccode\u003EGET\u003C\u002Fcode\u003E, \u003Ccode\u003EPOST\u003C\u002Fcode\u003E, \u003Ccode\u003EPUT\u003C\u002Fcode\u003E, \u003Ccode\u003EDELETE\u003C\u002Fcode\u003E or \u003Ccode\u003EPATCH\u003C\u002Fcode\u003E) by adding it in the filename separated by a \u003Ccode\u003E.\u003C\u002Fcode\u003E. The default method is \u003Ccode\u003EGET\u003C\u002Fcode\u003E:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode\u003E📂 api\n┣ 📂 posts\n┃ ┗ 📜 *.GET.json\n┃ ┣ 📂 [postid]\n┃ ┃ ┗ 📜 *.json\n┃ ┃ ┗ 📜 *.POST.json\n┃ ┃ ┗ 📜 *.DELETE.json\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThis will serve:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode\u003EGET    \u002Fposts\nGET    \u002Fposts\u002F:postid\nPOST   \u002Fposts\u002F:postid\nDELETE \u002Fposts\u002F:postid\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 class=\"mt-5\"  id=\"https-status-code\"\u003EHTTP's status code\u003C\u002Fh3\u003E\n\u003Cp\u003EDefine what status code your route should respond by adding it in the filename after the HTTP method (if there is one) separated by a \u003Ccode\u003E.\u003C\u002Fcode\u003E. The default status code is \u003Ccode\u003E200\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode\u003E📂 api\n┣ 📂 posts\n┃ ┗ 📜 *.GET.json\n┃ ┣ 📂 [postid]\n┃ ┃ ┗ 📜 *.200.json\n┃ ┃ ┗ 📜 *.POST.201.json\n┃ ┃ ┗ 📜 *.DELETE.204.json\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EIt will serve:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode class=\"bash language-bash\"\u003EGET    \u002Fposts          # 200\nGET    \u002Fposts\u002F:postid  # 200\nPOST   \u002Fposts\u002F:postid  # 201\nDELETE \u002Fposts\u002F:postid  # 204\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 class=\"mt-5\"  id=\"routes-state\"\u003ERoute's state\u003C\u002Fh3\u003E\n\u003Cp\u003EIn an API, the same route may return different responses depending on certain factors. A simple example is a request called with a wrong parameter, the response will probably contain an error message instead of the expected result.\u003C\u002Fp\u003E\n\u003Cp\u003ESo you can create an endpoint with several different states. To do this you just have to create a new file for each different state by adding at the end of the file the syntax \u003Ccode\u003E{STATE_NAME}\u003C\u002Fcode\u003E separated by a dot.\u003C\u002Fp\u003E\n\u003Cp\u003EHere is an example of how to define an endpoint with several states:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode\u003E📂 api\n┣ 📂 posts\n┃ ┗ 📜 *.json\n┃ ┣ 📂 [postid]\n┃ ┃ ┗ 📜 *.json\n┃ ┃ ┗ 📜 *.404.{INV_ID}.json\n┃ ┃ ┗ 📜 *.POST.201.json\n┃ ┃ ┗ 📜 *.POST.401.{INV_CRED}.json\n┃ ┃ ┗ 📜 *.POST.400.{INV_PARAMS}.json\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EIt will serve:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode class=\"bash language-bash\"\u003EGET    \u002Fposts\nGET    \u002Fposts\u002F:postid  # 200\nPOST   \u002Fposts\u002F:postid  # 201\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EYou will then in the \u003Ca href=\"todo\"\u003Edashboard\u003C\u002Fa\u003E be able to select which state you want to use for a specific route. So for example if you select the state \u003Ccode\u003EINV_PARAMS\u003C\u002Fcode\u003E for the route \u003Ccode\u003EPOST \u002Fposts\u002F[postid]\u003C\u002Fcode\u003E, the server will respond with the status code \u003Ccode\u003E400\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Ch2 id=\"routes-file-content\"\u003ERoute's file content\u003C\u002Fh2\u003E\n\u003Cp\u003EThe structure of the files allows to define the API endpoints, now it is necessary to define what they respond.\u003C\u002Fp\u003E\n\u003Ch3 class=\"mt-5\"  id=\"responses-body\"\u003EResponse's body\u003C\u002Fh3\u003E\n\u003Cp\u003EThe content of a route file will correspond to the body of the request's response. For example if the file \u003Ccode\u003E\u002Fapi\u002Fusers\u002F*.json\u003C\u002Fcode\u003E contains this content:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode class=\"json language-json\"\u003E[\n  {\n    \"id\": 1,\n    \"name\": \"bob\"\n  },\n  {\n    \"id\": 2,\n    \"name\": \"alice\"\n  }\n]\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThe response's body of \u003Ccode\u003EGET \u002Fusers\u003C\u002Fcode\u003E will be this array of 2 users.\u003C\u002Fp\u003E\n\u003Ch3 class=\"mt-5\"  id=\"extended-syntax\"\u003EExtended syntax\u003C\u002Fh3\u003E\n\u003Cp\u003EA route file can also contain an 'extended' syntax that allow you to specify a custom response's header. The syntax is the following:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode class=\"typescript language-typescript\"\u003E{\n  \"#header\": Object,\n  \"#body\": Array or Object \n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EExample:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode class=\"json language-json\"\u003E{\n  \"#header\": {\n    \"Content-Type\": \"text\u002Fhtml; charset=UTF-8\"\n  },\n  \"#body\": {\n    \"success\": false\n  }\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 class=\"mt-5\"  id=\"consume-routes-variables\"\u003EConsume route's variables\u003C\u002Fh3\u003E\n\u003Cp\u003EYou can define some route's variables in your route's filename (see \u003Ca href=\"docs#routes-variables\"\u003Eroute's variables\u003C\u002Fa\u003E section). You can then consume them in your response's body.\u003C\u002Fp\u003E\n\u003Cp\u003EFor example the file \u003Ccode\u003E\u002Fapi\u002Fposts\u002F[postid].json\u003C\u002Fcode\u003E contains the route variable \u003Ccode\u003Epostid\u003C\u002Fcode\u003E that you can use in the file content:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode class=\"json language-json\"\u003E{\n  \"id\": \"[postid]\",\n  \"content\": \"Lorem ipsum dolor sit amet, consectetur adipisici elit, …\"\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EAs a result, if you request \u003Ccode\u003EGET \u002Fposts\u002Fmy-post\u003C\u002Fcode\u003E you will get the response:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode class=\"json language-json\"\u003E{\n  \"id\": \"my-post\",\n  \"content\": \"Lorem ipsum dolor sit amet, consectetur adipisici elit, …\"\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch4 class=\"mt-4\"  id=\"routes-variable-casting\"\u003ERoute's variable casting\u003C\u002Fh4\u003E\n\u003Cp\u003EBy default, all route's variables are interpreted as a string. You can cast a variable to a number by using the following syntax \u003Ccode\u003E\"n:[myroutevar]\"\u003C\u002Fcode\u003E. So if you use the previous example and replace the file content to:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode class=\"json language-json\"\u003E{\n  \"id\": \"n:[postid]\",\n  \"content\": \"Lorem ipsum dolor sit amet, consectetur adipisici elit, …\"\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Eand then call the route \u003Ccode\u003EGET \u002Fposts\u002F42\u003C\u002Fcode\u003E, you will get the response:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode class=\"json language-json\"\u003E{\n  \"id\": 42,\n  \"content\": \"Lorem ipsum dolor sit amet, consectetur adipisici elit, …\"\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cblockquote class=\"alert alert-warning\" \u003E\n  \u003Cp\u003E⚠️ Don't cast your number route's variable that are present in a string. Just use them like \u003Ccode\u003E\"content\": \"The post [postid] is nice …\"\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Ch3 class=\"mt-5\"  id=\"consume-routes-query-string-variables\"\u003EConsume route's query string variables\u003C\u002Fh3\u003E\n\u003Cp\u003EYou can consume query string variables in your body using the syntax \u003Ccode\u003E[q:&lt;variable&gt;]\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ETake the following file \u003Ccode\u003E\u002Fapi\u002Fusers.json\u003C\u002Fcode\u003E for example:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode class=\"json language-json\"\u003E[\n  {\n    \"id\": 1,\n    \"name\": \"bob\",\n    \"age\": \"[q:age]\"\n  },\n  {\n    \"id\": 2,\n    \"name\": \"alice\",\n    \"age\": \"[q:age]\"\n  }\n]\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EI you request \u003Ccode\u003EGET \u002Fapi\u002Fusers?age=42\u003C\u002Fcode\u003E, you will get:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode class=\"json language-json\"\u003E[\n  {\n    \"id\": 1,\n    \"name\": \"bob\",\n    \"age\": \"42\"\n  },\n  {\n    \"id\": 2,\n    \"name\": \"alice\",\n    \"age\": \"42\"\n  }\n]\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EYou can also declare a default value using this syntax \u003Ccode\u003E[q:&lt;variable&gt;|&lt;defaultValue&gt;]\u003C\u002Fcode\u003E:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode class=\"json language-json\"\u003E[\n  {\n    \"id\": 1,\n    \"name\": \"bob\",\n    \"age\": \"[q:age|30]\"\n  },\n  {\n    \"id\": 2,\n    \"name\": \"alice\",\n    \"age\": \"[q:age|42]\"\n  }\n]\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ESo if you request \u003Ccode\u003EGET \u002Fapi\u002Fusers\u003C\u002Fcode\u003E you will get:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode class=\"json language-json\"\u003E[\n  {\n    \"id\": 1,\n    \"name\": \"bob\",\n    \"age\": \"30\"\n  },\n  {\n    \"id\": 2,\n    \"name\": \"alice\",\n    \"age\": \"42\"\n  }\n]\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 class=\"mt-5\"  id=\"fakerjs-integration\"\u003EFakerjs integration\u003C\u002Fh3\u003E\n\u003Cp\u003ETo easily create mocked data, restapify integrate the \u003Ca href=\"https:\u002F\u002Fgithub.com\u002FMarak\u002Ffaker.js\"\u003Efakerjs\u003C\u002Fa\u003E library with an easy to use syntax.\u003C\u002Fp\u003E\n\u003Cp\u003ETo get for example a faked text content with the regular library you will call \u003Ccode\u003Efaker.lorem.paragraphs()\u003C\u002Fcode\u003E. In your route's response you can use it following the syntax \u003Ccode\u003E[#faker:&lt;namespace&gt;:&lt;method&gt;]\u003C\u002Fcode\u003E:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode class=\"json language-json\"\u003E{\n  \"id\": \"n:[postid]\",\n  \"content\": \"[#faker:lorem:paragraphs]\"\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ECheckout \u003Ca href=\"https:\u002F\u002Fgithub.com\u002FMarak\u002Ffaker.js#api-methods\"\u003Ehere\u003C\u002Fa\u003E all the methods that you can use.\u003C\u002Fp\u003E\n\u003Ch3 class=\"mt-5\"  id=\"for-loops\"\u003EFor-loops\u003C\u002Fh3\u003E\n\u003Cp\u003ETo easily create a big amount of data in an array, Restapify provides a for-loop syntax. Its structure is the following:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode class=\"js language-js\"\u003E[\n  \"#for &lt;x&gt; in &lt;sequence&gt;\",\n  \"&lt;statement&gt;\",\n  \"#endfor\"\n]\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThere is 2 options to create a \u003Ccode\u003Esequence\u003C\u002Fcode\u003E: using an \u003Ca href=\"docs#for-loops-array-sequence\"\u003Earray\u003C\u002Fa\u003E or the \u003Ca href=\"#for-loops-range-sequence\"\u003Erange\u003C\u002Fa\u003E function.\u003C\u002Fp\u003E\n\u003Ch4 class=\"mt-4\"  id=\"for-loops-array-sequence\"\u003EFor-loop's array sequence\u003C\u002Fh4\u003E\n\u003Cp\u003EYou can easily create multiple data by iterate over an array:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode class=\"json language-json\"\u003E[\n  \"#for animal in ['rabbit', 'mouse', 'lion']\",\n  { \"type\": \"[animal]\" },\n  \"#endfor\"\n]\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EHere the \u003Ccode\u003E&lt;sequence&gt;\u003C\u002Fcode\u003E is \u003Ccode\u003E['rabbit', 'mouse', 'lion']\u003C\u002Fcode\u003E, the iterator variable \u003Ccode\u003E&lt;x&gt;\u003C\u002Fcode\u003E is \u003Ccode\u003Eanimal\u003C\u002Fcode\u003E and the statement is \u003Ccode\u003E{ \"type\": \"[animal]\" }\u003C\u002Fcode\u003E. Note that you can use the value of \u003Ccode\u003Ex\u003C\u002Fcode\u003E inside the statement by using the syntax \u003Ccode\u003E[x]\u003C\u002Fcode\u003E. This example will produce:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode class=\"json language-json\"\u003E[\n  { \"type\": \"rabbit\" },\n  { \"type\": \"mouse\" },\n  { \"type\": \"lion\" }\n]\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch4 class=\"mt-4\"  id=\"for-loops-range-sequence\"\u003EFor-loop's range sequence\u003C\u002Fh4\u003E\n\u003Cp\u003EFor bigger amount of data you can use the \u003Ccode\u003Erange\u003C\u002Fcode\u003E syntax that works the same than \u003Ca href=\"https:\u002F\u002Flodash.com\u002Fdocs\u002F4.17.15#range\"\u003Erange() from lodash\u003C\u002Fa\u003E:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode class=\"json language-json\"\u003E[\n  \"#for userId in range(10)\",\n  { \"id\": \"n:[userId]\", \"type\": \"user\" },\n  \"#endfor\"\n]\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThis example will produce:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode class=\"js language-js\"\u003E[\n  { \"id\": 0, \"type\": \"user\" },\n  { \"id\": 1, \"type\": \"user\" },\n  \u002F\u002F ...\n  { \"id\": 9, \"type\": \"user\" },\n]\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch4 class=\"mt-4\"  id=\"use-routes-variables-in-sequence\"\u003EUse route's variables in sequence\u003C\u002Fh4\u003E\n\u003Cp\u003EYou can use \u003Ca href=\"docs#consume-routes-variables\"\u003Eroute's variables\u003C\u002Fa\u003E and \u003Ca href=\"#consume-routes-query-string-variables\"\u003Eroute's query string variables\u003C\u002Fa\u003E in your for loop's sequence:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode class=\"json language-json\"\u003E[\n  \"#for userId in range([q:limit|20])\",\n  { \"id\": \"n:[userId]\", \"type\": \"user\" },\n  \"#endfor\"\n]\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EYou can then have \u003Ccode\u003Ex\u003C\u002Fcode\u003E users in the response of \u003Ccode\u003EGET \u002Fapi\u002Fusers?limit=x\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Ch2 id=\"cli\"\u003ECLI\u003C\u002Fh2\u003E\n\u003Cp\u003ERestapify comes with a cli to easily serve your mocked API.\u003C\u002Fp\u003E\n\u003Ch3 class=\"mt-5\"  id=\"restapify-serve\"\u003E\u003Ccode\u003Erestapify serve\u003C\u002Fcode\u003E\u003C\u002Fh3\u003E\n\u003Cp\u003EServe the mocked API from a specific directory:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode\u003Erestapify serve &lt;rootDir&gt;\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 class=\"mt-5\"  id=\"restapify-list\"\u003E\u003Ccode\u003Erestapify list\u003C\u002Fcode\u003E\u003C\u002Fh3\u003E\n\u003Cp\u003EList all the routes detected by restapify from a specific directory:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode\u003Erestapify list &lt;rootDir&gt;\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 class=\"mt-5\"  id=\"🚧-serve-from-configuration-file\"\u003E🚧 Serve from configuration file\u003C\u002Fh3\u003E\n\u003Cp\u003EServe the mocked API from a configuration file. The default path is \u003Ccode\u003E.\u002Frestapify.config.json\u003C\u002Fcode\u003E:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode\u003Erestapify [path]\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThe configuration file has to follow the structure of the type \u003Ccode\u003EConfigFile\u003C\u002Fcode\u003E:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode class=\"typescript language-typescript\"\u003Einterface ConfigFileState  {\n  \"route\": string,\n  \"method\": 'GET' | 'POST' | 'DELETE' | 'PUT' |'PATCH',\n  \"state\": string\n}\ninterface ConfigFile {\n  \"rootDir\": string,           \u002F\u002F [REQUIRED] relative path to the API root directory\n  \"apiBaseUrl\": string,        \u002F\u002F default: `api\u002F`\n  \"port\": number,              \u002F\u002F default: `6767`\n  \"states\": ConfigFileState[], \u002F\u002F default: `undefined`\n  \"openDashboard\": boolean     \u002F\u002F default: `true` \n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EExample:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode class=\"json language-json\"\u003E{\n  \"rootDir\": \".\u002Fapi\",\n  \"apiBaseUrl\": \"my-api\u002F\",\n  \"port\": 6768,\n  \"states\": [\n    {\n      \"route\": \"\u002Fusers\u002F[userid]\",\n      \"method\": \"DELETE\",\n      \"state\": \"ERR\"\n    }\n  ]\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 class=\"mt-5\"  id=\"flags\"\u003EFlags\u003C\u002Fh3\u003E\n\u003Ctable class=\"table table-striped\" \u003E\n\u003Cthead\u003E\n\u003Ctr\u003E\n\u003Cth\u003Eshort\u003C\u002Fth\u003E\n\u003Cth\u003Elong\u003C\u002Fth\u003E\n\u003Cth\u003Edescription\u003C\u002Fth\u003E\n\u003Cth\u003Edefault\u003C\u002Fth\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Fthead\u003E\n\u003Ctbody\u003E\n\u003Ctr\u003E\n\u003Ctd\u003E\u003Ccode\u003E-v\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003E\u003Ccode\u003E--version\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003Eoutput the current version\u003C\u002Ftd\u003E\n\u003Ctd\u003E\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd\u003E\u003Ccode\u003E-p &lt;number&gt;\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003E\u003Ccode\u003E--port &lt;number&gt;\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003Eport to serve the API\u003C\u002Ftd\u003E\n\u003Ctd\u003E\u003Ccode\u003E6767\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd\u003E\u003Ccode\u003E-b &lt;string&gt;\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003E\u003Ccode\u003E--baseUrl &lt;string&gt;\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003Ebase url to serve the API\u003C\u002Ftd\u003E\n\u003Ctd\u003E\u003Ccode\u003E'\u002Fapi'\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003E\u003Ccode\u003E--no-open\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003Edon't open dashboard on server start\u003C\u002Ftd\u003E\n\u003Ctd\u003E\u003Ccode\u003Efalse\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Ftbody\u003E\n\u003C\u002Ftable\u003E\n\u003Ch2 id=\"javascripts-api\"\u003EJavaScript's API\u003C\u002Fh2\u003E\n\u003Cp\u003ERestapify provides a JavaScript API which is usable from Node.js. You will rarely need to use this, and should probably be using the command line.\u003C\u002Fp\u003E\n\u003Ch3 class=\"mt-5\"  id=\"types-definition-list\"\u003ETypes definition list\u003C\u002Fh3\u003E\n\u003Ch4 class=\"mt-4\"  id=\"restapifyparams\"\u003ERestapifyParams\u003C\u002Fh4\u003E\n\u003Cp\u003EObject of needed parameters to instanciate a Restapify's instance.\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode class=\"typescript language-typescript\"\u003Einterface RestapifyParams {\n  rootDir: string\n  port?: number           \u002F\u002F default: 6767\n  baseUrl?: string        \u002F\u002F default: '\u002Fapi'\n  states?: RouteState[]   \u002F\u002F default: []\n  openDashboard?: boolean \u002F\u002F default: false\n  hotWatch?: boolean      \u002F\u002F default: true\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch4 class=\"mt-4\"  id=\"routestate\"\u003ERouteState\u003C\u002Fh4\u003E\n\u003Cp\u003EUsed in Restapify parameter to specify which state use for a specific route.\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode class=\"typescript language-typescript\"\u003Einterface RouteState {\n  route: string\n  state?: string\n  method?: HttpVerb \u002F\u002F default: 'GET'\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 class=\"mt-5\"  id=\"restapifys-constructor\"\u003ERestapify's constructor\u003C\u002Fh3\u003E\n\u003Cp\u003EFirst step is to create an Restapify's instance with a \u003Ccode\u003Eparams\u003C\u002Fcode\u003E object from type \u003Ca href=\"docs#restapifyParams\"\u003ERestapifyParams\u003C\u002Fa\u003E:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode class=\"js language-js\"\u003Eimport Restapify from 'restapify'\n\nconst params = {...}\n\nconst rpfy = new Restapify(params)\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EBe aware that \u003Ccode\u003Eparams.rootDir\u003C\u002Fcode\u003E has to be the \u003Cstrong\u003Eabsolute\u003C\u002Fstrong\u003E path to the directory. This can be easily achieved by using the \u003Ca href=\"https:\u002F\u002Fnodejs.org\u002Fapi\u002Fpath.html\"\u003Epath\u003C\u002Fa\u003E library:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode class=\"js language-js\"\u003Eimport * as path from 'path'\n\nconst rootDir = path.resolve(__dirname, '.\u002Fapi')\nconst params = { rootDir }\n\u002F\u002F ...\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 class=\"mt-5\"  id=\"restapifyrun\"\u003ERestapify.run()\u003C\u002Fh3\u003E\n\u003Cp\u003EUse the method \u003Ccode\u003Erun\u003C\u002Fcode\u003E after the instanciation to start the mocked API server:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode class=\"js language-js\"\u003Eimport Restapify from 'restapify'\nconst params = {...}\nconst rpfy = new Restapify(params)\n\nrpfy.run()\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 class=\"mt-5\"  id=\"restapifyclose\"\u003ERestapify.close()\u003C\u002Fh3\u003E\n\u003Cp\u003EStop the mocked API server:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode class=\"js language-js\"\u003Eimport Restapify from 'restapify'\nconst params = {...}\nconst rpfy = new Restapify(params)\n\nrpfy.run()\n\nsetTimeout(() =&gt; { \n  \u002F\u002F Close the server after 3 seconds\n  rpfy.close()\n}, 3000);\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 class=\"mt-5\"  id=\"restapifyon\"\u003ERestapify.on()\u003C\u002Fh3\u003E\n\u003Cp\u003EYou can trigger callbacks on different event with the help of the \u003Ccode\u003Eon(&lt;event&gt;, &lt;callback&gt;)\u003C\u002Fcode\u003E method:\u003C\u002Fp\u003E\n\u003Cpre class=\"rounded-2\" \u003E\u003Ccode class=\"js language-js\"\u003Eimport Restapify from 'restapify'\nconst params = {...}\nconst rpfy = new Restapify(params)\n\nrpfy.on('start', () =&gt; { console.log('Mocked API successfully started') })\nrpfy.on(['server:start', 'server:restart'], () =&gt; { console.log('Event on server') })\nrpfy.on('error', ({ error, message }) =&gt; {\n  console.log(`Failed with error ${error}: ${message}`)\n  rpfy.close()\n  process.exit(1)\n})\n\nrpfy.run()\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch4 class=\"mt-4\"  id=\"events-list\"\u003EEvents list\u003C\u002Fh4\u003E\n\u003Ctable class=\"table table-striped\" \u003E\n\u003Cthead\u003E\n\u003Ctr\u003E\n\u003Cth\u003Eevent\u003C\u002Fth\u003E\n\u003Cth\u003Edescription\u003C\u002Fth\u003E\n\u003Cth\u003Ecallback type\u003C\u002Fth\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Fthead\u003E\n\u003Ctbody\u003E\n\u003Ctr\u003E\n\u003Ctd\u003E\u003Cstrong\u003Estart\u003C\u002Fstrong\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003ERestapify started successfully\u003C\u002Ftd\u003E\n\u003Ctd\u003E\u003Ccode\u003E() =&gt; void\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd\u003E\u003Cstrong\u003Eserver:start\u003C\u002Fstrong\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EMocked API served successfully\u003C\u002Ftd\u003E\n\u003Ctd\u003E\u003Ccode\u003E() =&gt; void\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd\u003E\u003Cstrong\u003Eserver:restart\u003C\u002Fstrong\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EMocked has been refreshed successfully\u003C\u002Ftd\u003E\n\u003Ctd\u003E\u003Ccode\u003E() =&gt; void\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd\u003E\u003Cstrong\u003Edashboard:open\u003C\u002Fstrong\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EDashboard SPA has been opened in the browser\u003C\u002Ftd\u003E\n\u003Ctd\u003E\u003Ccode\u003E() =&gt; void\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd\u003E\u003Cstrong\u003Eerror\u003C\u002Fstrong\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EError detected\u003C\u002Ftd\u003E\n\u003Ctd\u003E\u003Ccode\u003E({ error: RestapifyErrorName, message?:string } =&gt; void)\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Ftbody\u003E\n\u003C\u002Ftable\u003E\n\u003Ch4 class=\"mt-4\"  id=\"restapifyonerror-callback\"\u003ERestapify.on('error', \u003Ccallback\u003E)\u003C\u002Fh4\u003E\n\u003Cp\u003EThe error callback provides as parameter an object with 2 usefull infos: the \u003Ccode\u003Eerror\u003C\u002Fcode\u003E string identifier and \u003Cem\u003Eoptionally\u003C\u002Fem\u003E a \u003Ccode\u003Emessage\u003C\u002Fcode\u003E that explain the reason of the error. Here is the list of the different errors (type \u003Ccode\u003ERestapifyErrorName\u003C\u002Fcode\u003E):\u003C\u002Fp\u003E\n\u003Ctable class=\"table table-striped\" \u003E\n\u003Cthead\u003E\n\u003Ctr\u003E\n\u003Cth\u003Eerror\u003C\u002Fth\u003E\n\u003Cth\u003Edescription\u003C\u002Fth\u003E\n\u003Cth style=\"text-align:center;\"\u003Emessage\u003C\u002Fth\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Fthead\u003E\n\u003Ctbody\u003E\n\u003Ctr\u003E\n\u003Ctd\u003E\u003Cstrong\u003EINV:JSON_FILE\u003C\u002Fstrong\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003Eone of the detected json files is invalid\u003C\u002Ftd\u003E\n\u003Ctd style=\"text-align:center;\"\u003E✅\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd\u003E\u003Cstrong\u003EMISS:ROOT_DIR\u003C\u002Fstrong\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003Eroot directory parameter is missing or invalid\u003C\u002Ftd\u003E\n\u003Ctd style=\"text-align:center;\"\u003E❌\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd\u003E\u003Cstrong\u003EMISS:PORT\u003C\u002Fstrong\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003Egiven port is not available\u003C\u002Ftd\u003E\n\u003Ctd style=\"text-align:center;\"\u003E❌\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd\u003E\u003Cstrong\u003EINV:API_BASEURL\u003C\u002Fstrong\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003Egiven api base url is needed for internal purposes (ex: \u003Ccode\u003E\u002Frestapify\u003C\u002Fcode\u003E)\u003C\u002Ftd\u003E\n\u003Ctd style=\"text-align:center;\"\u003E❌\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd\u003E\u003Cstrong\u003EINV:FAKER_SYNTAX\u003C\u002Fstrong\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003Einvalid call to the fakerjs library\u003C\u002Ftd\u003E\n\u003Ctd style=\"text-align:center;\"\u003E✅\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd\u003E\u003Cstrong\u003EERR\u003C\u002Fstrong\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EUnhandled error triggered\u003C\u002Ftd\u003E\n\u003Ctd style=\"text-align:center;\"\u003E✅\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Ftbody\u003E\n\u003C\u002Ftable\u003E",htmlContentTable:"\u003C!-- START doctoc generated TOC please keep comment here to allow auto update --\u003E\n\u003C!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE --\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\"docs#file-structure\"\u003EFile structure\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"docs#routes-filename\"\u003ERoute's filename\u003C\u002Fa\u003E\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\"docs#simple-route\"\u003ESimple route\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"docs#star-notation\"\u003EStar notation\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"docs#routes-variables\"\u003ERoute's variables\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"docs#https-methods\"\u003EHTTP's methods\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"docs#https-status-code\"\u003EHTTP's status code\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"docs#routes-state\"\u003ERoute's state\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"docs#routes-file-content\"\u003ERoute's file content\u003C\u002Fa\u003E\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\"docs#responses-body\"\u003EResponse's body\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"docs#extended-syntax\"\u003EExtended syntax\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"docs#consume-routes-variables\"\u003EConsume route's variables\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"docs#routes-variable-casting\"\u003ERoute's variable casting\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"docs#consume-routes-query-string-variables\"\u003EConsume route's query string variables\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"docs#fakerjs-integration\"\u003EFakerjs integration\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"docs#for-loops\"\u003EFor-loops\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"docs#for-loops-array-sequence\"\u003EFor-loop's array sequence\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"docs#for-loops-range-sequence\"\u003EFor-loop's range sequence\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"docs#use-routes-variables-in-sequence\"\u003EUse route's variables in sequence\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"docs#cli\"\u003ECLI\u003C\u002Fa\u003E\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\"docs#restapify-serve\"\u003E\u003Ccode\u003Erestapify serve\u003C\u002Fcode\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"docs#restapify-list\"\u003E\u003Ccode\u003Erestapify list\u003C\u002Fcode\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"docs#-serve-from-configuration-file\"\u003E🚧 Serve from configuration file\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"docs#flags\"\u003EFlags\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"docs#javascripts-api\"\u003EJavaScript's API\u003C\u002Fa\u003E\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\"docs#types-definition-list\"\u003ETypes definition list\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"docs#restapifyparams\"\u003ERestapifyParams\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"docs#routestate\"\u003ERouteState\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"docs#restapifys-constructor\"\u003ERestapify's constructor\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"docs#restapifyrun\"\u003ERestapify.run()\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"docs#restapifyclose\"\u003ERestapify.close()\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"docs#restapifyon\"\u003ERestapify.on()\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"docs#events-list\"\u003EEvents list\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"docs#restapifyonerror-callback\"\u003ERestapify.on('error', \u003Ccallback\u003E)\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E"}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');(function(){try{eval("async function x(){}");var main="/client/client.8afcb580.js"}catch(e){main="/client/legacy/client.daea6bb3.js"};var s=document.createElement("script");try{new Function("if(0)import('')")();s.src=main;s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@2.0.4.js";s.setAttribute("data-main",main);}document.head.appendChild(s);}());</script> <link href=client/client-ec2f6238.css rel=stylesheet><link href=client/Icon-06494acf.css rel=stylesheet><link href=client/docs-06494acf.css rel=stylesheet> <title>Docs • Restapify</title><script crossorigin=anonymous integrity="sha512-zol3kFQ5tnYhL7PzGt0LnllHHVWRGt2bTCIywDiScVvLIlaDOVJ6sPdJTVi0m3rA660RT+yZxkkRzMbb1L8Zkw==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/highlight.min.js data-svelte=svelte-c1qtge></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/styles/zenburn.min.css rel=stylesheet crossorigin=anonymous integrity="sha512-JPxjD2t82edI35nXydY/erE9jVPpqxEJ++6nYEoZEpX2TRsmp2FpZuQqZa+wBCen5U16QZOkMadGXHCfp+tUdg==" data-svelte=svelte-1ooda1l> <link href=/client/client.8afcb580.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/client-ec2f6238.css rel=preload as=style><link href=/client/docs.a6b1ebed.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/Icon.c34c0ab7.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/inject_styles.5607aec6.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/Icon-06494acf.css rel=preload as=style><link href=/client/docs-06494acf.css rel=preload as=style></head> <body> <div id=sapper> <nav class="svelte-c735tm bg-light navbar navbar-expand-lg navbar-light pb-0 pt-0 px-md-4 shadow"><div class=container-fluid><a href=/ class="svelte-c735tm d-flex align-contents-center link-dark p-0" rel=prefetch id=brand><img alt="Restapify icon" src=data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20version%3D%221.1%22%20viewBox%3D%22-84.96%20112.15%201139.43%20855.7%22%3E%3Cdesc%3ECreated%20with%20Fabric.js%204.2.0%3C%2Fdesc%3E%3Cdefs%3E%3C%2Fdefs%3E%3Cg%20transform%3D%22matrix%281%200%200%201%20540%20540%29%22%20id%3D%22b13d279c-a7c8-43f8-8418-b25b69802bc2%22%3E%3C%2Fg%3E%3Cg%20transform%3D%22matrix%281.05%200%200%201.05%20484.45%20540%29%22%3E%3Cg%20style%3D%22%22%20vector-effect%3D%22non-scaling-stroke%22%3E%20%20%3Cg%20transform%3D%22matrix%281.14%200%200%201.14%20201.2%2081.18%29%22%3E%3Cpath%20style%3D%22stroke%3A%20none%3B%20stroke-width%3A%201%3B%20stroke-dasharray%3A%20none%3B%20stroke-linecap%3A%20butt%3B%20stroke-dashoffset%3A%200%3B%20stroke-linejoin%3A%20miter%3B%20stroke-miterlimit%3A%204%3B%20fill%3A%20rgb%28255%2C219%2C144%29%3B%20fill-rule%3A%20nonzero%3B%20opacity%3A%201%3B%22%20vector-effect%3D%22non-scaling-stroke%22%20transform%3D%22%20translate%28-165.62%2C%20-226.03%29%22%20d%3D%22M%20-94.1058%20347.385%20C%20-173.166%20264.173%20-129.411%20152.842%20-11.8513%20152.738%20C%2038.2839%20152.698%2081.5833%20146.74%20126.879%20119.868%20C%20191.565%2081.4719%20231.015%2020.0446%20315.697%2030.4263%20C%20441.73%2045.7432%20496.13%20170.706%20447.911%20280.464%20C%20414.698%20356.026%20345.173%20393.703%20268.301%20409.388%20C%20162.153%20431.013%20-12.602%20436.468%20-94.1058%20347.385%20Z%22%20stroke-linecap%3D%22round%22%2F%3E%3C%2Fg%3E%20%20%3Cg%20transform%3D%22matrix%28-0.7%200.9%20-0.9%20-0.7%20-155.41%200%29%22%3E%3Cpath%20style%3D%22stroke%3A%20none%3B%20stroke-width%3A%201%3B%20stroke-dasharray%3A%20none%3B%20stroke-linecap%3A%20butt%3B%20stroke-dashoffset%3A%200%3B%20stroke-linejoin%3A%20miter%3B%20stroke-miterlimit%3A%204%3B%20fill%3A%20rgb%28214%2C235%2C244%29%3B%20fill-rule%3A%20nonzero%3B%20opacity%3A%201%3B%22%20vector-effect%3D%22non-scaling-stroke%22%20transform%3D%22%20translate%28-165.62%2C%20-226.03%29%22%20d%3D%22M%20-94.1058%20347.385%20C%20-173.166%20264.173%20-129.411%20152.842%20-11.8513%20152.738%20C%2038.2839%20152.698%2081.5833%20146.74%20126.879%20119.868%20C%20191.565%2081.4719%20231.015%2020.0446%20315.697%2030.4263%20C%20441.73%2045.7432%20496.13%20170.706%20447.911%20280.464%20C%20414.698%20356.026%20345.173%20393.703%20268.301%20409.388%20C%20162.153%20431.013%20-12.602%20436.468%20-94.1058%20347.385%20Z%22%20stroke-linecap%3D%22round%22%2F%3E%3C%2Fg%3E%20%20%3Cg%20transform%3D%22matrix%2847.86%200%200%2047.86%2065.11%20-68.26%29%22%3E%3Cpath%20style%3D%22stroke%3A%20rgb%280%2C0%2C0%29%3B%20stroke-width%3A%200%3B%20stroke-dasharray%3A%20none%3B%20stroke-linecap%3A%20butt%3B%20stroke-dashoffset%3A%200%3B%20stroke-linejoin%3A%20miter%3B%20stroke-miterlimit%3A%204%3B%20fill%3A%20rgb%280%2C0%2C0%29%3B%20fill-rule%3A%20nonzero%3B%20opacity%3A%201%3B%22%20vector-effect%3D%22non-scaling-stroke%22%20transform%3D%22%20translate%28-8%2C%20-7.5%29%22%20d%3D%22M%200.54%203.87%20L%200.5%203%20C%200.5%201.895430500338413%201.395430500338413%201%202.5%201%20L%206.172000000000001%201%20C%206.702389626957629%201.0001132748109898%207.211014537285083%201.2109012503780958%207.585999999999999%201.5859999999999992%20L%208.414%202.4139999999999997%20C%208.788985462714916%202.7890987496219033%209.297610373042371%202.9998867251890093%209.828%203%20L%2013.809999999999999%203%20C%2014.371944507063548%202.99994181344107%2014.907988548753293%203.2362943728740303%2015.286958175882914%203.651220455589744%20C%2015.665927803012535%204.066146538305458%2015.852855981174343%204.6213614545232184%2015.802%205.180999999999999%20L%2015.165%2012.181000000000001%20C%2015.071411322559975%2013.21088633969406%2014.208129849263837%2013.999590006155977%2013.174%2014%20L%202.826%2014%20C%201.7918701507361623%2013.999590006155977%200.9285886774400236%2013.21088633969406%200.835%2012.181000000000001%20L%200.19799999999999995%205.181000000000001%20C%200.15538623098938223%204.717782492347585%200.2763940224250574%204.254273115795729%200.5400000000000003%203.8710000000000004%20z%20M%202.19%204%20C%201.9091230222874496%203.9999836431888887%201.6411881700891677%204.1180921977290375%201.4517202526954953%204.32544162539882%20C%201.262252335301823%204.532791053068602%201.1687210714867386%204.810262886535049%201.194%205.09%20L%201.831%2012.09%20C%201.8775341360619322%2012.604950220712128%202.3089517251732294%2012.99951304090437%202.8260000000000005%2013%20L%2013.174000000000001%2013%20C%2013.691048274826771%2012.99951304090437%2014.122465863938068%2012.604950220712128%2014.169%2012.09%20L%2014.806000000000001%205.09%20C%2014.831278928513262%204.810262886535048%2014.737747664698178%204.5327910530686015%2014.548279747304505%204.3254416253988195%20C%2014.358811829910833%204.1180921977290375%2014.09087697771255%203.9999836431888887%2013.81%204%20L%202.19%204%20z%20M%206.880000000000001%202.293%20C%206.692262313828545%202.105205444372648%206.437541315719522%201.9997912460026708%206.171999999999999%202%20L%202.5%202%20C%201.9550509222374148%201.9999016279796986%201.5103540237673267%202.436149285378855%201.5%202.981%20L%201.506%203.12%20C%201.72%203.042%201.95%203%202.19%203%20L%207.586%203%20L%206.8790000000000004%202.293%20z%22%20stroke-linecap%3D%22round%22%2F%3E%3C%2Fg%3E%20%20%3Cg%20transform%3D%22matrix%281.73%200%200%201.73%2065.07%20-59.59%29%22%3E%3Cg%20style%3D%22%22%20vector-effect%3D%22non-scaling-stroke%22%3E%20%20%3Cg%20transform%3D%22matrix%282.5%200%200%202.5%20-94.57%200.19%29%22%3E%3Cpath%20style%3D%22stroke%3A%20none%3B%20stroke-width%3A%201%3B%20stroke-dasharray%3A%20none%3B%20stroke-linecap%3A%20butt%3B%20stroke-dashoffset%3A%200%3B%20stroke-linejoin%3A%20miter%3B%20stroke-miterlimit%3A%204%3B%20fill%3A%20rgb%280%2C0%2C0%29%3B%20fill-rule%3A%20nonzero%3B%20opacity%3A%201%3B%22%20vector-effect%3D%22non-scaling-stroke%22%20transform%3D%22%20translate%28-161.51%2C%20-196.14%29%22%20d%3D%22M%20161.509%20212.413%20C%20157.24099999999999%20212.413%20153.783%20208.954%20153.783%20204.687%20L%20153.783%20187.586%20C%20153.783%20183.31900000000002%20157.24099999999999%20179.86%20161.509%20179.86%20C%20165.777%20179.86%20169.23499999999999%20183.31900000000002%20169.23499999999999%20187.586%20L%20169.23499999999999%20204.687%20C%20169.236%20208.954%20165.777%20212.413%20161.509%20212.413%20z%22%20stroke-linecap%3D%22round%22%2F%3E%3C%2Fg%3E%20%20%3Cg%20transform%3D%22matrix%282.5%200%200%202.5%2094.58%20-0.19%29%22%3E%3Cpath%20style%3D%22stroke%3A%20none%3B%20stroke-width%3A%201%3B%20stroke-dasharray%3A%20none%3B%20stroke-linecap%3A%20butt%3B%20stroke-dashoffset%3A%200%3B%20stroke-linejoin%3A%20miter%3B%20stroke-miterlimit%3A%204%3B%20fill%3A%20rgb%280%2C0%2C0%29%3B%20fill-rule%3A%20nonzero%3B%20opacity%3A%201%3B%22%20vector-effect%3D%22non-scaling-stroke%22%20transform%3D%22%20translate%28-161.51%2C%20-196.14%29%22%20d%3D%22M%20161.509%20212.413%20C%20157.24099999999999%20212.413%20153.783%20208.954%20153.783%20204.687%20L%20153.783%20187.586%20C%20153.783%20183.31900000000002%20157.24099999999999%20179.86%20161.509%20179.86%20C%20165.777%20179.86%20169.23499999999999%20183.31900000000002%20169.23499999999999%20187.586%20L%20169.23499999999999%20204.687%20C%20169.236%20208.954%20165.777%20212.413%20161.509%20212.413%20z%22%20stroke-linecap%3D%22round%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fg%3E%20%20%3Cg%20transform%3D%22matrix%282.5%20-0.77%200.77%202.5%2064.87%2083.22%29%22%3E%3Cpath%20style%3D%22stroke%3A%20none%3B%20stroke-width%3A%201%3B%20stroke-dasharray%3A%20none%3B%20stroke-linecap%3A%20butt%3B%20stroke-dashoffset%3A%200%3B%20stroke-linejoin%3A%20miter%3B%20stroke-miterlimit%3A%204%3B%20fill%3A%20rgb%280%2C0%2C0%29%3B%20fill-rule%3A%20nonzero%3B%20opacity%3A%201%3B%22%20vector-effect%3D%22non-scaling-stroke%22%20transform%3D%22%20translate%28-256%2C%20-208.65%29%22%20d%3D%22M%20255.999%20221.541%20C%20244.68%20221.541%20234.059%20216.81799999999998%20226.85999999999999%20208.581%20C%20224.051%20205.368%20224.379%20200.488%20227.59099999999998%20197.679%20C%20230.80399999999997%20194.87%20235.68499999999997%20195.197%20238.49299999999997%20198.41%20C%20242.75899999999996%20203.289%20249.13899999999995%20206.087%20255.99799999999996%20206.087%20C%20262.85799999999995%20206.087%20269.23799999999994%20203.289%20273.50199999999995%20198.411%20C%20276.30899999999997%20195.197%20281.19199999999995%20194.869%20284.40299999999996%20197.679%20C%20287.616%20200.487%20287.94499999999994%20205.368%20285.135%20208.581%20C%20277.939%20216.818%20267.318%20221.541%20255.999%20221.541%20z%22%20stroke-linecap%3D%22round%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E class=svelte-c735tm> <h1 class="svelte-c735tm d-md-block d-none fs-4 mb-0 ms-1">Restapify</h1></a> <ul class="d-flex mb-0 ms-auto"><li class="svelte-c735tm nav-item"><a href=/docs class="svelte-c735tm nav-link" rel=prefetch>Docs</a></li> <li class="svelte-c735tm nav-item"><a href=https://github.com/johannchopin/restapify class="svelte-c735tm nav-link" target=_blank>GitHub</a></li> <li class="svelte-c735tm nav-item d-md-block d-none ms-3"><a href=https://codecov.io/gh/johannchopin/restapify class="svelte-c735tm nav-link"><img alt=codecov src=https://img.shields.io/codecov/c/github/johannchopin/restapify target=_blank></a></li> <li class="svelte-c735tm nav-item align-items-center d-flex"><iframe frameborder=0 height=20 scrolling=0 src="https://ghbtns.com/github-btn.html?user=johannchopin&repo=restapify&type=star&count=true&v=2" title=GitHub width=100></iframe></ul></div></nav> <main class=svelte-1xuhwr1> <div class="svelte-1hb9u9u row" id=wrapper><div class="svelte-1hb9u9u bg-light border-end col-11 col-md-3" id=sidebar> <ul> <li><a href=docs#file-structure>File structure</a></li> <li><a href=docs#routes-filename>Route's filename</a><ul> <li><a href=docs#simple-route>Simple route</a></li> <li><a href=docs#star-notation>Star notation</a></li> <li><a href=docs#routes-variables>Route's variables</a></li> <li><a href=docs#https-methods>HTTP's methods</a></li> <li><a href=docs#https-status-code>HTTP's status code</a></li> <li><a href=docs#routes-state>Route's state</a></ul></li> <li><a href=docs#routes-file-content>Route's file content</a><ul> <li><a href=docs#responses-body>Response's body</a></li> <li><a href=docs#extended-syntax>Extended syntax</a></li> <li><a href=docs#consume-routes-variables>Consume route's variables</a></li> <li><a href=docs#routes-variable-casting>Route's variable casting</a></li> <li><a href=docs#consume-routes-query-string-variables>Consume route's query string variables</a></li> <li><a href=docs#fakerjs-integration>Fakerjs integration</a></li> <li><a href=docs#for-loops>For-loops</a></li> <li><a href=docs#for-loops-array-sequence>For-loop's array sequence</a></li> <li><a href=docs#for-loops-range-sequence>For-loop's range sequence</a></li> <li><a href=docs#use-routes-variables-in-sequence>Use route's variables in sequence</a></ul></li> <li><a href=docs#cli>CLI</a><ul> <li><a href=docs#restapify-serve><code>restapify serve</code></a></li> <li><a href=docs#restapify-list><code>restapify list</code></a></li> <li><a href=docs#-serve-from-configuration-file>🚧 Serve from configuration file</a></li> <li><a href=docs#flags>Flags</a></ul></li> <li><a href=docs#javascripts-api>JavaScript's API</a><ul> <li><a href=docs#types-definition-list>Types definition list</a></li> <li><a href=docs#restapifyparams>RestapifyParams</a></li> <li><a href=docs#routestate>RouteState</a></li> <li><a href=docs#restapifys-constructor>Restapify's constructor</a></li> <li><a href=docs#restapifyrun>Restapify.run()</a></li> <li><a href=docs#restapifyclose>Restapify.close()</a></li> <li><a href=docs#restapifyon>Restapify.on()</a></li> <li><a href=docs#events-list>Events list</a></li> <li><a href=docs#restapifyonerror-callback>Restapify.on('error', <callback>)</callback></a></ul></li> </ul> <button class="svelte-1hb9u9u bg-light btn btn-outline-dark d-md-none end-0 m-2 position-absolute top-0" id=closeSidebarBtn><img alt="Icon x" src=data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22currentColor%22%20class%3D%22bi%20bi-x%22%20viewBox%3D%220%200%2016%2016%22%3E%20%20%3Cpath%20d%3D%22M4.646%204.646a.5.5%200%200%201%20.708%200L8%207.293l2.646-2.647a.5.5%200%200%201%20.708.708L8.707%208l2.647%202.646a.5.5%200%200%201-.708.708L8%208.707l-2.646%202.647a.5.5%200%200%201-.708-.708L7.293%208%204.646%205.354a.5.5%200%200%201%200-.708z%22%2F%3E%3C%2Fsvg%3E class="icon svelte-1w3h9yq"></button></div> <section class="svelte-1hb9u9u col p-4 position-relative" id=docs><a href=https://github.com/johannchopin/restapify/edit/main/docs/README.md class="mt-4 align-items-center btn btn-outline-dark d-flex end-0 me-4 position-absolute top-0"><img alt="edit docs" src=data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22currentColor%22%20class%3D%22bi%20bi-pencil-square%22%20viewBox%3D%220%200%2016%2016%22%3E%20%20%3Cpath%20d%3D%22M15.502%201.94a.5.5%200%200%201%200%20.706L14.459%203.69l-2-2L13.502.646a.5.5%200%200%201%20.707%200l1.293%201.293zm-1.75%202.456l-2-2L4.939%209.21a.5.5%200%200%200-.121.196l-.805%202.414a.25.25%200%200%200%20.316.316l2.414-.805a.5.5%200%200%200%20.196-.12l6.813-6.814z%22%2F%3E%20%20%3Cpath%20fill-rule%3D%22evenodd%22%20d%3D%22M1%2013.5A1.5%201.5%200%200%200%202.5%2015h11a1.5%201.5%200%200%200%201.5-1.5v-6a.5.5%200%200%200-1%200v6a.5.5%200%200%201-.5.5h-11a.5.5%200%200%201-.5-.5v-11a.5.5%200%200%201%20.5-.5H9a.5.5%200%200%200%200-1H2.5A1.5%201.5%200%200%200%201%202.5v11z%22%2F%3E%3C%2Fsvg%3E class=svelte-1hb9u9u> <p class="ms-1 m-0">Edit on GitHub</p></a> <h1 id=documentation>Documentation</h1> <h2 id=file-structure>File structure</h2> <p>Restapify allow you to easily create REST API routes using a specific file structure. Take the following folder <code>api/</code> for example:</p> <pre class=rounded-2><code>📂 api
┣ 📂 users
┃ ┗ 📜 *.json
┃ ┗ 📜 [userid].json
┃ ┗ 📜 [userid].DELETE.json
┣ 📂 posts
┃ ┗ 📜 [postid].json
┃ ┗ 📜 my-post.PUT.json
┣ 📜 posts.json
</code></pre> <p>It will serve the following routes:</p> <pre class=rounded-2><code>GET    /users
GET    /users/:userid
DELETE /users/:userid
GET    /posts
GET    /posts/:postid
PUT    /posts/my-post
</code></pre> <h2 id=routes-filename>Route's filename</h2> <p>The mocked API creation start directly with the filename choice.</p> <h3 class=mt-5 id=simple-route>Simple route</h3> <p>You can create a simple route with the filename of a <code>json</code> file:</p> <pre class=rounded-2><code>📂 api
┣ 📂 animals
┃ ┗ 📜 rabbits.json
┣ 📜 posts.json
</code></pre> <p>It will serve the routes:</p> <pre class=rounded-2><code>GET /animals/rabbits
GET /posts
</code></pre> <h3 class=mt-5 id=star-notation>Star notation</h3> <p>To easily manage your different routes <code>json</code> files into folder, you can use the star notation:</p> <pre class=rounded-2><code>📂 api
┣ 📂 animals
┃ ┗ 📜 *.json
┃ ┗ 📜 rabbits.json
</code></pre> <p>It will serve the routes:</p> <pre class=rounded-2><code class="bash language-bash">GET /animals    # &lt;-- served from the file /animals/*.json
GET /animals/rabbits
</code></pre> <h3 class=mt-5 id=routes-variables>Route's variables</h3> <p>You can define some variables in your routes by using squared brackets. It works on a filename but also on directory name:</p> <pre class=rounded-2><code>📂 api
┣ 📂 posts
┃ ┗ 📜 [postid].json
┃ ┣ 📂 [postid]
┃ ┃ ┗ 📜 comments.json
</code></pre> <p>This will serve:</p> <pre class=rounded-2><code>GET /posts/:postid
GET /posts/:postid/comments
</code></pre> <p>You will be then able to use theses variables in the json files (see the <a href=docs#consume-routes-variables>Consume route's variables</a> section).</p> <blockquote class="alert alert-warning"> <p>⚠️ In case your want to use severals variables inside a route like <code>/posts/:var1/comments/:var2</code>, make sure that they have an unique name</p> </blockquote> <h3 class=mt-5 id=https-methods>HTTP's methods</h3> <p>Define your routes method (<code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>DELETE</code> or <code>PATCH</code>) by adding it in the filename separated by a <code>.</code>. The default method is <code>GET</code>:</p> <pre class=rounded-2><code>📂 api
┣ 📂 posts
┃ ┗ 📜 *.GET.json
┃ ┣ 📂 [postid]
┃ ┃ ┗ 📜 *.json
┃ ┃ ┗ 📜 *.POST.json
┃ ┃ ┗ 📜 *.DELETE.json
</code></pre> <p>This will serve:</p> <pre class=rounded-2><code>GET    /posts
GET    /posts/:postid
POST   /posts/:postid
DELETE /posts/:postid
</code></pre> <h3 class=mt-5 id=https-status-code>HTTP's status code</h3> <p>Define what status code your route should respond by adding it in the filename after the HTTP method (if there is one) separated by a <code>.</code>. The default status code is <code>200</code></p> <pre class=rounded-2><code>📂 api
┣ 📂 posts
┃ ┗ 📜 *.GET.json
┃ ┣ 📂 [postid]
┃ ┃ ┗ 📜 *.200.json
┃ ┃ ┗ 📜 *.POST.201.json
┃ ┃ ┗ 📜 *.DELETE.204.json
</code></pre> <p>It will serve:</p> <pre class=rounded-2><code class="bash language-bash">GET    /posts          # 200
GET    /posts/:postid  # 200
POST   /posts/:postid  # 201
DELETE /posts/:postid  # 204
</code></pre> <h3 class=mt-5 id=routes-state>Route's state</h3> <p>In an API, the same route may return different responses depending on certain factors. A simple example is a request called with a wrong parameter, the response will probably contain an error message instead of the expected result.</p> <p>So you can create an endpoint with several different states. To do this you just have to create a new file for each different state by adding at the end of the file the syntax <code>{STATE_NAME}</code> separated by a dot.</p> <p>Here is an example of how to define an endpoint with several states:</p> <pre class=rounded-2><code>📂 api
┣ 📂 posts
┃ ┗ 📜 *.json
┃ ┣ 📂 [postid]
┃ ┃ ┗ 📜 *.json
┃ ┃ ┗ 📜 *.404.{INV_ID}.json
┃ ┃ ┗ 📜 *.POST.201.json
┃ ┃ ┗ 📜 *.POST.401.{INV_CRED}.json
┃ ┃ ┗ 📜 *.POST.400.{INV_PARAMS}.json
</code></pre> <p>It will serve:</p> <pre class=rounded-2><code class="bash language-bash">GET    /posts
GET    /posts/:postid  # 200
POST   /posts/:postid  # 201
</code></pre> <p>You will then in the <a href=todo>dashboard</a> be able to select which state you want to use for a specific route. So for example if you select the state <code>INV_PARAMS</code> for the route <code>POST /posts/[postid]</code>, the server will respond with the status code <code>400</code>.</p> <h2 id=routes-file-content>Route's file content</h2> <p>The structure of the files allows to define the API endpoints, now it is necessary to define what they respond.</p> <h3 class=mt-5 id=responses-body>Response's body</h3> <p>The content of a route file will correspond to the body of the request's response. For example if the file <code>/api/users/*.json</code> contains this content:</p> <pre class=rounded-2><code class="json language-json">[
  {
    "id": 1,
    "name": "bob"
  },
  {
    "id": 2,
    "name": "alice"
  }
]
</code></pre> <p>The response's body of <code>GET /users</code> will be this array of 2 users.</p> <h3 class=mt-5 id=extended-syntax>Extended syntax</h3> <p>A route file can also contain an 'extended' syntax that allow you to specify a custom response's header. The syntax is the following:</p> <pre class=rounded-2><code class="language-typescript typescript">{
  "#header": Object,
  "#body": Array or Object 
}
</code></pre> <p>Example:</p> <pre class=rounded-2><code class="json language-json">{
  "#header": {
    "Content-Type": "text/html; charset=UTF-8"
  },
  "#body": {
    "success": false
  }
}
</code></pre> <h3 class=mt-5 id=consume-routes-variables>Consume route's variables</h3> <p>You can define some route's variables in your route's filename (see <a href=docs#routes-variables>route's variables</a> section). You can then consume them in your response's body.</p> <p>For example the file <code>/api/posts/[postid].json</code> contains the route variable <code>postid</code> that you can use in the file content:</p> <pre class=rounded-2><code class="json language-json">{
  "id": "[postid]",
  "content": "Lorem ipsum dolor sit amet, consectetur adipisici elit, …"
}
</code></pre> <p>As a result, if you request <code>GET /posts/my-post</code> you will get the response:</p> <pre class=rounded-2><code class="json language-json">{
  "id": "my-post",
  "content": "Lorem ipsum dolor sit amet, consectetur adipisici elit, …"
}
</code></pre> <h4 class=mt-4 id=routes-variable-casting>Route's variable casting</h4> <p>By default, all route's variables are interpreted as a string. You can cast a variable to a number by using the following syntax <code>"n:[myroutevar]"</code>. So if you use the previous example and replace the file content to:</p> <pre class=rounded-2><code class="json language-json">{
  "id": "n:[postid]",
  "content": "Lorem ipsum dolor sit amet, consectetur adipisici elit, …"
}
</code></pre> <p>and then call the route <code>GET /posts/42</code>, you will get the response:</p> <pre class=rounded-2><code class="json language-json">{
  "id": 42,
  "content": "Lorem ipsum dolor sit amet, consectetur adipisici elit, …"
}
</code></pre> <blockquote class="alert alert-warning"> <p>⚠️ Don't cast your number route's variable that are present in a string. Just use them like <code>"content": "The post [postid] is nice …"</code></p> </blockquote> <h3 class=mt-5 id=consume-routes-query-string-variables>Consume route's query string variables</h3> <p>You can consume query string variables in your body using the syntax <code>[q:&lt;variable>]</code></p> <p>Take the following file <code>/api/users.json</code> for example:</p> <pre class=rounded-2><code class="json language-json">[
  {
    "id": 1,
    "name": "bob",
    "age": "[q:age]"
  },
  {
    "id": 2,
    "name": "alice",
    "age": "[q:age]"
  }
]
</code></pre> <p>I you request <code>GET /api/users?age=42</code>, you will get:</p> <pre class=rounded-2><code class="json language-json">[
  {
    "id": 1,
    "name": "bob",
    "age": "42"
  },
  {
    "id": 2,
    "name": "alice",
    "age": "42"
  }
]
</code></pre> <p>You can also declare a default value using this syntax <code>[q:&lt;variable>|&lt;defaultValue>]</code>:</p> <pre class=rounded-2><code class="json language-json">[
  {
    "id": 1,
    "name": "bob",
    "age": "[q:age|30]"
  },
  {
    "id": 2,
    "name": "alice",
    "age": "[q:age|42]"
  }
]
</code></pre> <p>So if you request <code>GET /api/users</code> you will get:</p> <pre class=rounded-2><code class="json language-json">[
  {
    "id": 1,
    "name": "bob",
    "age": "30"
  },
  {
    "id": 2,
    "name": "alice",
    "age": "42"
  }
]
</code></pre> <h3 class=mt-5 id=fakerjs-integration>Fakerjs integration</h3> <p>To easily create mocked data, restapify integrate the <a href=https://github.com/Marak/faker.js>fakerjs</a> library with an easy to use syntax.</p> <p>To get for example a faked text content with the regular library you will call <code>faker.lorem.paragraphs()</code>. In your route's response you can use it following the syntax <code>[#faker:&lt;namespace>:&lt;method>]</code>:</p> <pre class=rounded-2><code class="json language-json">{
  "id": "n:[postid]",
  "content": "[#faker:lorem:paragraphs]"
}
</code></pre> <p>Checkout <a href=https://github.com/Marak/faker.js#api-methods>here</a> all the methods that you can use.</p> <h3 class=mt-5 id=for-loops>For-loops</h3> <p>To easily create a big amount of data in an array, Restapify provides a for-loop syntax. Its structure is the following:</p> <pre class=rounded-2><code class="js language-js">[
  "#for &lt;x> in &lt;sequence>",
  "&lt;statement>",
  "#endfor"
]
</code></pre> <p>There is 2 options to create a <code>sequence</code>: using an <a href=docs#for-loops-array-sequence>array</a> or the <a href=#for-loops-range-sequence>range</a> function.</p> <h4 class=mt-4 id=for-loops-array-sequence>For-loop's array sequence</h4> <p>You can easily create multiple data by iterate over an array:</p> <pre class=rounded-2><code class="json language-json">[
  "#for animal in ['rabbit', 'mouse', 'lion']",
  { "type": "[animal]" },
  "#endfor"
]
</code></pre> <p>Here the <code>&lt;sequence></code> is <code>['rabbit', 'mouse', 'lion']</code>, the iterator variable <code>&lt;x></code> is <code>animal</code> and the statement is <code>{ "type": "[animal]" }</code>. Note that you can use the value of <code>x</code> inside the statement by using the syntax <code>[x]</code>. This example will produce:</p> <pre class=rounded-2><code class="json language-json">[
  { "type": "rabbit" },
  { "type": "mouse" },
  { "type": "lion" }
]
</code></pre> <h4 class=mt-4 id=for-loops-range-sequence>For-loop's range sequence</h4> <p>For bigger amount of data you can use the <code>range</code> syntax that works the same than <a href=https://lodash.com/docs/4.17.15#range>range() from lodash</a>:</p> <pre class=rounded-2><code class="json language-json">[
  "#for userId in range(10)",
  { "id": "n:[userId]", "type": "user" },
  "#endfor"
]
</code></pre> <p>This example will produce:</p> <pre class=rounded-2><code class="js language-js">[
  { "id": 0, "type": "user" },
  { "id": 1, "type": "user" },
  // ...
  { "id": 9, "type": "user" },
]
</code></pre> <h4 class=mt-4 id=use-routes-variables-in-sequence>Use route's variables in sequence</h4> <p>You can use <a href=docs#consume-routes-variables>route's variables</a> and <a href=#consume-routes-query-string-variables>route's query string variables</a> in your for loop's sequence:</p> <pre class=rounded-2><code class="json language-json">[
  "#for userId in range([q:limit|20])",
  { "id": "n:[userId]", "type": "user" },
  "#endfor"
]
</code></pre> <p>You can then have <code>x</code> users in the response of <code>GET /api/users?limit=x</code></p> <h2 id=cli>CLI</h2> <p>Restapify comes with a cli to easily serve your mocked API.</p> <h3 class=mt-5 id=restapify-serve><code>restapify serve</code></h3> <p>Serve the mocked API from a specific directory:</p> <pre class=rounded-2><code>restapify serve &lt;rootDir>
</code></pre> <h3 class=mt-5 id=restapify-list><code>restapify list</code></h3> <p>List all the routes detected by restapify from a specific directory:</p> <pre class=rounded-2><code>restapify list &lt;rootDir>
</code></pre> <h3 class=mt-5 id=🚧-serve-from-configuration-file>🚧 Serve from configuration file</h3> <p>Serve the mocked API from a configuration file. The default path is <code>./restapify.config.json</code>:</p> <pre class=rounded-2><code>restapify [path]
</code></pre> <p>The configuration file has to follow the structure of the type <code>ConfigFile</code>:</p> <pre class=rounded-2><code class="language-typescript typescript">interface ConfigFileState  {
  "route": string,
  "method": 'GET' | 'POST' | 'DELETE' | 'PUT' |'PATCH',
  "state": string
}
interface ConfigFile {
  "rootDir": string,           // [REQUIRED] relative path to the API root directory
  "apiBaseUrl": string,        // default: `api/`
  "port": number,              // default: `6767`
  "states": ConfigFileState[], // default: `undefined`
  "openDashboard": boolean     // default: `true` 
}
</code></pre> <p>Example:</p> <pre class=rounded-2><code class="json language-json">{
  "rootDir": "./api",
  "apiBaseUrl": "my-api/",
  "port": 6768,
  "states": [
    {
      "route": "/users/[userid]",
      "method": "DELETE",
      "state": "ERR"
    }
  ]
}
</code></pre> <h3 class=mt-5 id=flags>Flags</h3> <table class="table table-striped"> <thead> <tr> <th>short</th> <th>long</th> <th>description</th> <th>default</th> </tr> </thead> <tbody> <tr> <td><code>-v</code></td> <td><code>--version</code></td> <td>output the current version</td> <td></td> </tr> <tr> <td><code>-p &lt;number></code></td> <td><code>--port &lt;number></code></td> <td>port to serve the API</td> <td><code>6767</code></td> </tr> <tr> <td><code>-b &lt;string></code></td> <td><code>--baseUrl &lt;string></code></td> <td>base url to serve the API</td> <td><code>'/api'</code></td> </tr> <tr> <td></td> <td><code>--no-open</code></td> <td>don't open dashboard on server start</td> <td><code>false</code></td> </tr> </tbody> </table> <h2 id=javascripts-api>JavaScript's API</h2> <p>Restapify provides a JavaScript API which is usable from Node.js. You will rarely need to use this, and should probably be using the command line.</p> <h3 class=mt-5 id=types-definition-list>Types definition list</h3> <h4 class=mt-4 id=restapifyparams>RestapifyParams</h4> <p>Object of needed parameters to instanciate a Restapify's instance.</p> <pre class=rounded-2><code class="language-typescript typescript">interface RestapifyParams {
  rootDir: string
  port?: number           // default: 6767
  baseUrl?: string        // default: '/api'
  states?: RouteState[]   // default: []
  openDashboard?: boolean // default: false
  hotWatch?: boolean      // default: true
}
</code></pre> <h4 class=mt-4 id=routestate>RouteState</h4> <p>Used in Restapify parameter to specify which state use for a specific route.</p> <pre class=rounded-2><code class="language-typescript typescript">interface RouteState {
  route: string
  state?: string
  method?: HttpVerb // default: 'GET'
}
</code></pre> <h3 class=mt-5 id=restapifys-constructor>Restapify's constructor</h3> <p>First step is to create an Restapify's instance with a <code>params</code> object from type <a href=docs#restapifyParams>RestapifyParams</a>:</p> <pre class=rounded-2><code class="js language-js">import Restapify from 'restapify'

const params = {...}

const rpfy = new Restapify(params)
</code></pre> <p>Be aware that <code>params.rootDir</code> has to be the <strong>absolute</strong> path to the directory. This can be easily achieved by using the <a href=https://nodejs.org/api/path.html>path</a> library:</p> <pre class=rounded-2><code class="js language-js">import * as path from 'path'

const rootDir = path.resolve(__dirname, './api')
const params = { rootDir }
// ...
</code></pre> <h3 class=mt-5 id=restapifyrun>Restapify.run()</h3> <p>Use the method <code>run</code> after the instanciation to start the mocked API server:</p> <pre class=rounded-2><code class="js language-js">import Restapify from 'restapify'
const params = {...}
const rpfy = new Restapify(params)

rpfy.run()
</code></pre> <h3 class=mt-5 id=restapifyclose>Restapify.close()</h3> <p>Stop the mocked API server:</p> <pre class=rounded-2><code class="js language-js">import Restapify from 'restapify'
const params = {...}
const rpfy = new Restapify(params)

rpfy.run()

setTimeout(() => { 
  // Close the server after 3 seconds
  rpfy.close()
}, 3000);
</code></pre> <h3 class=mt-5 id=restapifyon>Restapify.on()</h3> <p>You can trigger callbacks on different event with the help of the <code>on(&lt;event>, &lt;callback>)</code> method:</p> <pre class=rounded-2><code class="js language-js">import Restapify from 'restapify'
const params = {...}
const rpfy = new Restapify(params)

rpfy.on('start', () => { console.log('Mocked API successfully started') })
rpfy.on(['server:start', 'server:restart'], () => { console.log('Event on server') })
rpfy.on('error', ({ error, message }) => {
  console.log(`Failed with error ${error}: ${message}`)
  rpfy.close()
  process.exit(1)
})

rpfy.run()
</code></pre> <h4 class=mt-4 id=events-list>Events list</h4> <table class="table table-striped"> <thead> <tr> <th>event</th> <th>description</th> <th>callback type</th> </tr> </thead> <tbody> <tr> <td><strong>start</strong></td> <td>Restapify started successfully</td> <td><code>() => void</code></td> </tr> <tr> <td><strong>server:start</strong></td> <td>Mocked API served successfully</td> <td><code>() => void</code></td> </tr> <tr> <td><strong>server:restart</strong></td> <td>Mocked has been refreshed successfully</td> <td><code>() => void</code></td> </tr> <tr> <td><strong>dashboard:open</strong></td> <td>Dashboard SPA has been opened in the browser</td> <td><code>() => void</code></td> </tr> <tr> <td><strong>error</strong></td> <td>Error detected</td> <td><code>({ error: RestapifyErrorName, message?:string } => void)</code></td> </tr> </tbody> </table> <h4 class=mt-4 id=restapifyonerror-callback>Restapify.on('error', <callback>)</callback></h4> <p>The error callback provides as parameter an object with 2 usefull infos: the <code>error</code> string identifier and <em>optionally</em> a <code>message</code> that explain the reason of the error. Here is the list of the different errors (type <code>RestapifyErrorName</code>):</p> <table class="table table-striped"> <thead> <tr> <th>error</th> <th>description</th> <th style=text-align:center>message</th> </tr> </thead> <tbody> <tr> <td><strong>INV:JSON_FILE</strong></td> <td>one of the detected json files is invalid</td> <td style=text-align:center>✅</td> </tr> <tr> <td><strong>MISS:ROOT_DIR</strong></td> <td>root directory parameter is missing or invalid</td> <td style=text-align:center>❌</td> </tr> <tr> <td><strong>MISS:PORT</strong></td> <td>given port is not available</td> <td style=text-align:center>❌</td> </tr> <tr> <td><strong>INV:API_BASEURL</strong></td> <td>given api base url is needed for internal purposes (ex: <code>/restapify</code>)</td> <td style=text-align:center>❌</td> </tr> <tr> <td><strong>INV:FAKER_SYNTAX</strong></td> <td>invalid call to the fakerjs library</td> <td style=text-align:center>✅</td> </tr> <tr> <td><strong>ERR</strong></td> <td>Unhandled error triggered</td> <td style=text-align:center>✅</td> </tr> </tbody> </table></section> <button class="svelte-1hb9u9u bg-light btn btn-outline-dark d-md-none end-0 m-2 position-absolute bottom-0" id=toggleSidebarBtn><img alt="Icon x" src=data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22currentColor%22%20class%3D%22bi%20bi-x%22%20viewBox%3D%220%200%2016%2016%22%3E%20%20%3Cpath%20d%3D%22M4.646%204.646a.5.5%200%200%201%20.708%200L8%207.293l2.646-2.647a.5.5%200%200%201%20.708.708L8.707%208l2.647%202.646a.5.5%200%200%201-.708.708L8%208.707l-2.646%202.647a.5.5%200%200%201-.708-.708L7.293%208%204.646%205.354a.5.5%200%200%201%200-.708z%22%2F%3E%3C%2Fsvg%3E class="icon svelte-1w3h9yq"></button></div></main></div> 